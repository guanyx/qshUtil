!function(e){"use strict";function n(e){t[e.name]=e.entry}var t={};e.qshUtil=t,e.qshRegister=n,"undefined"!=typeof module&&module.exports&&(module.exports=t),"function"==typeof define&&(define.amd||define.cmd)&&define(function(){return t})}(window),function(e){"use strict";function n(e,n){function t(){o=function(){s=!1,a=!0},n.show(),n.css("height"),s=!0,n.addClass("show")}function i(){o=function(){s=!1,a=!1,n.hide()},n.removeClass("show")}var s=!1,a=!1,o=function(){};e.on(_,function(e){e.stopPropagation(),a?i():t()}),n.on(_,function(e){e.stopPropagation()}),n.on("webkitTransitionEnd, transitionend",function(e){o(e)}),$(document).on(_,function(){i()})}function t(){history.back()}function i(e,n,t){var i=r(C,{name:e});f=$(i).appendTo(h),p=f.find(".head_left"),u=f.find(".head_right"),n&&f.addClass(n);var s="fixed";t===!1&&(s="relative"),f.css("position",s)}function s(e,n){p.prepend(r(E,{icon:e||L})),$(".head_back").on(_,function(){n&&n()===!1||t()})}function a(e,t,i){var s,a,d="appendTo";i&&(d="prependTo");var c;if(e.icon?(a=r(N,e),s=$(a)[d](t),c=e.icon):e.text&&(s=$(g)[d](t),s.text(e.text),c=e.text),e.id&&(c=e.id),v[c]=s,e.handler)s.on(_,e.handler);else if(e.items){var l=o(e.items);n(s,l)}if(e.hasActive){var h=$(P).appendTo(s.find("i"));s.on(_,function(){h.remove()})}}function o(e){var n=$(y).appendTo(f);return e.forEach(function(e){var t=r(R,e);t=$(t).appendTo(n),e.handler&&t.on(_,e.handler),e.hasActive&&t.append(I)}),n}function d(e){var n=!1;e.forEach(function(e){"back"===e.id?(s(e.icon,e.handler),n=!0):a(e,p)}),n||s()}function c(e){e.forEach(function(e){a(e,u)})}function r(e,n){for(var t,i=/{{(.*?)}}/g;t=i.exec(e);)e=e.replace(t[0],n[t[1]]),i.lastIndex=0;return e}function l(e){return h=$(e.mount),i(e.name,e.style,e.fixed),d(e.leftItems||[]),e.rightItems&&e.rightItems.length&&c(e.rightItems),{append:function(e){a(e,u)},prepend:function(e){a(e,u,!0)},remove:function(e){v[e]&&v[e].remove(),delete v[e]}}}var h,p,u,f,m="ontouchstart"in document.body,_=m?"touchstart":"click",v={},L="zuo",C='<div class="head"><div class="head_left"></div><div class="head_title">{{name}}</div><div class="head_right"></div></div>',E='<span class="head_icon head_back"><i class="iconfont icon-{{icon}}"></i></span>',N='<span class="head_icon"><i class="iconfont icon-{{icon}}"></i></span>',R='<li class="head_menus_item"><i class="iconfont icon-{{icon}}"></i><span>{{name}}</span></li>',I='<div class="icon-active-wrapper"><div class="icon_active"></div></div>',P='<div class="icon_active"></div>',y='<ul class="head_menus"></ul>',g='<span class="head_icon">完成</span>';qshRegister({name:"header",entry:l})}(window),function(e){"use strict";function n(e){this.element_=e,this.init()}function t(e){var t=document.createElement("div");t.classList.add("mdl-spinner"),t.classList.add("mdl-js-spinner"),t.classList.add("is-active");var i=new n(t);return e.appendChild(t),i}n.prototype.Constant_={MDL_SPINNER_LAYER_COUNT:4},n.prototype.CssClasses_={MDL_SPINNER_LAYER:"mdl-spinner__layer",MDL_SPINNER_CIRCLE_CLIPPER:"mdl-spinner__circle-clipper",MDL_SPINNER_CIRCLE:"mdl-spinner__circle",MDL_SPINNER_GAP_PATCH:"mdl-spinner__gap-patch",MDL_SPINNER_LEFT:"mdl-spinner__left",MDL_SPINNER_RIGHT:"mdl-spinner__right"},n.prototype.createLayer=function(e){var n=document.createElement("div");n.classList.add(this.CssClasses_.MDL_SPINNER_LAYER),n.classList.add(this.CssClasses_.MDL_SPINNER_LAYER+"-"+e);var t=document.createElement("div");t.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE_CLIPPER),t.classList.add(this.CssClasses_.MDL_SPINNER_LEFT);var i=document.createElement("div");i.classList.add(this.CssClasses_.MDL_SPINNER_GAP_PATCH);var s=document.createElement("div");s.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE_CLIPPER),s.classList.add(this.CssClasses_.MDL_SPINNER_RIGHT);for(var a=[t,i,s],o=0;o<a.length;o++){var d=document.createElement("div");d.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE),a[o].appendChild(d)}n.appendChild(t),n.appendChild(i),n.appendChild(s),this.element_.appendChild(n)},n.prototype.stop=function(){this.element_.classList.remove("is-active")},n.prototype.start=function(){this.element_.classList.add("is-active")},n.prototype.init=function(){if(this.element_){for(var e=1;e<=this.Constant_.MDL_SPINNER_LAYER_COUNT;e++)this.createLayer(e);this.element_.classList.add("is-upgraded")}},qshRegister({name:"spinner",entry:t})}(window),function(e){"use strict";function n(e){if(e){if(!e.mount)return void console.error("No Mount");this.element=$(e.mount),"static"===this.element.css("position")&&this.element.css("position","relative"),this.success=e.success,delete e.success,this.options=e,this.ajax(e)}}function t(e){return new n(e)}var i="qsh-module-load",s="qsh-module-load-text",a="qsh-module-load-spinner",o="qsh-module-load-refresh";n.prototype.ajax=function(){this.spinner(),$.ajax(this.options).done(function(e){this.hide(),this.success&&this.success(e)}.bind(this)).fail(function(e,n,t){this.fail("404"==n?"网络异常":"数据获取失败")}.bind(this))},n.prototype.fail=function(e){e=e||"未知错误",this.refresh(e)},n.prototype.create=function(){if(!this.element.children("."+i).length){var e=document.createElement("div");e.classList.add(i);var n=document.createElement("span");n.classList.add(s);var t=document.createElement("div");t.classList.add(a);var d=document.createElement("a");d.textContent="点击重试",d.classList.add(o),d.addEventListener("click",function(){this.ajax()}.bind(this),!1),e.appendChild(n),e.appendChild(t),e.appendChild(d),this.element.append(e)}},n.prototype.position=function(){this.create();var e=this.element.children("."+i);e.css(this.element.height()>40?{top:"50%",marginTop:"-20px"}:{top:"0px",marginTop:"0px"})},n.prototype.spinner=function(){this.position();var e=this.element.children("."+i);e.find("."+s).hide(),e.find("."+o).hide(),e.find("."+a).empty().show(),this.mdSpinner=qshUtil.spinner(e.find("."+a).get(0)),e.show()},n.prototype.refresh=function(e){this.position();var n=this.element.children("."+i);n.find("."+s).show().text(e),n.find("."+a).hide(),n.find("."+o).show(),n.show()},n.prototype.hide=function(){var e=this.element.children("."+i);e.hide()},qshRegister({name:"module",entry:t})}(window);